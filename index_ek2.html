<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title class="tag-name">Apollo</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<link rel="stylesheet" type="text/css" href="static/main.css">
<link href="static/semantic.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="static/stylend.css?v=5112">
<style>
.distribution{text-align:center}.distribution .lead{font-size:15px}.distribution .team{border-right:0 solid #565656}.distribution .team:last-child{border-right:0}.distribution .team img{width:75%}.distribution .team p{font-size:9pt}.team input:checked~img{filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 15px #00c1c8) drop-shadow(0 0 5px #0df);-webkit-filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 15px #00c1c8) drop-shadow(0 0 5px #0df)}.team img:hover{animation:slowpulse 1s infinite;filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 25px #00c1c8) drop-shadow(0 0 5px #0df)}.checkmark:after{content:"";position:absolute;display:none}.ethglow{filter:drop-shadow(0 0 2px #0b002b) drop-shadow(0 0 25px #00c1c8) drop-shadow(0 0 5px #0df);-webkit-filter:drop-shadow(0 0 2px #0b002b) drop-shadow(0 0 25px #00c1c8) drop-shadow(0 0 5px #0df)}.ethglow-slow{filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 25px #2ee1ef) drop-shadow(0 0 5px #008aff);-webkit-filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 25px #2ee1ef) drop-shadow(0 0 5px #008aff)}.ethglow-green{filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 25px #0c0) drop-shadow(0 0 5px #0f0);-webkit-filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 25px #0c0) drop-shadow(0 0 5px #0f0)}.ethglow-calm-down-sumpunk{filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 1px #00c1c8) drop-shadow(0 0 2px #0df);-webkit-filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 1px #00c1c8) drop-shadow(0 0 2px #0df)}.ethglow-its-okay-justo{filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 10px #00c1c8) drop-shadow(0 0 2px #0df);-webkit-filter:drop-shadow(0 0 2px #2b002b) drop-shadow(0 0 10px #00c1c8) drop-shadow(0 0 2px #0df)}.form-radio{opacity:0;position:absolute}.text-shadow-blue{text-shadow:0 0 5px blue,0 0 10px blue,0 0 30px blue}.text-shadow-zz{text-shadow:0 0 5px red,0 0 10px red,0 0 30px red}.text-shadow-yellow{text-shadow:0 0 5px yellow,0 0 10px yellow,0 0 30px yellow}.text-shadow-bl{text-shadow:0 0 5px black,0 0 10px red,0 0 30px black}.alertify-logs{z-index:1001}.ui.button.graceButton2{color:white;background:-webkit-linear-gradient(left,#02e5d1 0,#4391fd 100%);background:linear-gradient(90deg,#FFA500 0,#D2691E 100%);border:0;outline:0;padding:0;line-height:3rem;margin:0}.purchas-keys-buttons{display:flex;flex-wrap:nowrap} .purchas-keys-buttons div{line-height:1.5rem;flex:1;text-align:center;border:1px solid #ff8031;border-right:0} .purchas-keys-buttons div:nth-child(1){border-top-left-radius:4px;border-bottom-left-radius:4px}.purchas-keys-buttons div{color:#d37d4a;margin-top:1.5rem;transition:.3s ease-in-out all;cursor:pointer}.purchas-keys-buttons div:hover{background:#ff8031;color:white}.purchas-keys-buttons div:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px;border-right:1px solid #ff8031}.purchas-keys-buttons div:nth-child(1),.purchas-keys-buttons div:nth-child(2),.purchas-keys-buttons div:nth-child(3){flex:5;line-height:3rem}.send-eth.ui.grid{margin-top:1.5rem}.send-eth.ui.grid .ui.button.blue{font-size:1.25rem;line-height:3rem;padding:0;border-radius:.25rem}div.rightnav{font-weight:bolder; position:absolute; right:0px; top:0px;float:right;margin:0 12px 0 12px;}div.rightnav a{margin-left:18px;font-weight:bolder;color:white;}.clearsha{text-shadow:none;}
</style>
<link rel="shortcut icon" href="static/logo.png">
</head>


 <body class="" style="position: relative; overflow: visible;"> 
 <div class="bg"> </div><div class="rightnav">
      <a class="item language-item language_en" language-value="en" href="http://aplopro.com/">Mirror1</a>    
 <a class="item language-item language_en" language-value="en" href="http://27.102.102.243/">Mirror2</a>
 <a class="item language-item language_en" language-value="en" href="https://apolloctr.github.io/">Mirror3</a>
 
 <a class="item language-item language_en refresh" language-value="en">Refresh</a>
 <a class="item language-item language_en" language-value="en" href="index_ek.html">English</a>
 <a class="item language-item language_zh" language-value="zh" href="index_k.html">中文</a>
 </div>
 <div style="clear:both;"></div> <div class="header-container"> 
 <!-- Header -->
 <header id="header" style="background:rgba(0,0,0,0);margin-top:10px">
 <div class="content" style="border:0px;">
 <div class="inner">
 <div id="sparkle">
 <h3 class="" style="text-shadow: 0.1em 0.1em 0.2em black">Appllo</h3>
 <h5 class="" style="text-shadow: 0.1em 0.1em 0.2em black cont">
     <a target="_blank" href="https://tronscan.io/#/contract/TKmzgaUraKywqDHKASZNwuvNG2RrVEekwG/transactions">View Contract</a></h5>
 </div>
 
 
 <div class="ui center aligned basic segment" style="margin-top:-10px;"> 
 
 <br>
 <div class="ui labeled icon label" style="color:white;font-size:20px;font-weight:normal;background:rgba(0,0,0,0);">
 <span class="r-time text-shadow-yellow"><a href="ticket.html" style="color:red" target="_blank">Purchase Ticket</a></span>
 </div><br>
 

 <div class="ui labeled icon label" style="color:white;font-size:20px;font-weight:normal;background:rgba(0,0,0,0);">
 <span class="r-time text-shadow-yellow">Your Credit:</span>  <span class="mydeposit r-pot text-shadow-yellow">--</span> 
 <span style="font-size:13px;text-shadow-yellow;">&nbsp;&nbsp;</span></div>
 <br>
 
 <div class="ui labeled icon label" style="color:white;font-size:20px;font-weight:normal;background:rgba(0,0,0,0);">
 <span class="r-time text-shadow-yellow">Your GV:</span>  <span id="mygv" class="r-pot text-shadow-yellow">--</span> 
 <span style="font-size:13px;text-shadow-yellow">&nbsp;&nbsp;</span></div>
 <br>
 <div class="ui labeled icon label" style="color:white;font-size:18px;font-weight:normal;background:rgba(0,0,0,0);">
 <span class="r-time text-shadow-yellow">Address:</span>  <span id="myadd" class="r-pot text-shadow-yellow">--</span> 
 </div>
 
 <br>
 <div class="ui labeled icon label" style="color:white;font-size:20px;font-weight:normal;background:rgba(0,0,0,0);">
 <span class="r-time text-shadow-yellow" style="color:red">Wallet:</span>  <span id="mycon" class="r-pot text-shadow-yellow" style="color:red"> Not Connected </span> 
 </div>
 
 
 </div>
 </div>
 </div>
 </header>
 </div> 
 
 <div class="home-container ui container"> 
 <div style="background:rgba(0,0,0,0.6);border:0px;border-radius:10px;margin-top:-20px;" class="ui segment"> 
 
 <div class="ui column grid"><div class="column"> 
 
 <div class="ui horizontal header" style="margin-bottom:0px;"> 
 Use DAPP Browser?   <a href="index_e.html">Click Here</a> You set nodes:&nbsp;<span style="color:red">https://tron-mainnet.token.im</span> OR
 <span style="color:red">https://trx.mytokenpocket.vip</span>OR
 <span style="color:red">https://api.trongrid.io</span>
  </div>
 <div class="ui horizontal header" style="margin-bottom:-20px;"> 
 Load Private Key? Click Here&nbsp;<a href="index_ek.html">Node1</a>&nbsp;&nbsp;<a href="index_ek2.html">Node2</a>&nbsp;&nbsp;<a href="index_ek3.html">Node3</a>
  </div>
 <!--
 <div class="purchas-keys-buttons"> 
 <div id="connectweb" style="background:#ff8031;color:white;"> Connect Online Wallet </div> 
 <div id="eth-connected"> Not Connected </div> 
 
 </div> 
 
 <div style="color:#ffffff;font-weight:bold;text-align:center;vertical-align:middle;border:0px solid red;margin-bottom:-18px;"> 
  OR
  </div>-->
 <div class="purchas-keys-buttons"> 
 <div id="loadkey" style="background:#ff8031;color:white"> Load Private Key </div> 
 <div id="eth-five"> <input type="text" value="" style="margin:5px;padding:5px;width:95%" name="privkey" id="privkey" placeholder="Private Key"> </div> 
 </div>
 -->
 </div></div></div>
 
 
 
 
 <div class="home-container ui container"> 
 <div style="background:rgba(0,0,0,0.6);border:0px;border-radius:10px;margin-top:0px;" class="ui segment"> 
 <div class="ui column grid"><div class="column"> <div class="purchas-keys-buttons"> 
 <div id="trx-1"> 1000 TRX </div> 
 <div id="trx-2"> 15000 TRX </div> 
 <div id="trx-3"> 50000 TRX </div> 
 </div> 
 
 <div class="purchas-keys-buttons"> 
 <div id="eth-one"> Or Other value(TRX): </div> 
 <div id="eth-five"> <div class="ui horizontal verticle header"> 
 <input type="text" value="50000" style="margin:5px;padding:5px;width:95%" name="deposit_amount" id="deposit_amount"> 
 </div></div> 
 </div> 
 
 <div class="ui horizontal header"> 
  Sponsor: <span id="noSponsor">(No sponsor? Click here)</span><input type="text" name="sponsor" id="sponsor">
  </div>
 
 <div class="send-eth ui grid"> 
 <div class="sixteen wide computer eight wide tablet sixteen wide mobile column"> 
 <button class="ui button fluid btn-send graceButton2 deposit">
 <span class="tag-send-eth deposittrx">Deposit</span> 
 TRX</button> 

    <b><span style="color:red;" id="msg">Please make sure you have enough TT before you deposit</span></b>
  
 </div> </div> </div> </div> </div>
 <div class="ui bottom attached tab segment active" style="margin:20px 0;border:0;background:rgba(0,0,0,0.6);border-radius:10px;"> <fallback> 
 
 
 
 
 
 <h4 class="ui horizontal divider header tagb-title"> MY INFORMATION </h4> <div class="ui divider"></div> 
 <div class="content-wrapper" style="font-size:14px;"> 
 <div class="ui grid"> 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-gen"> Status</div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="mystatus p-gen">--</span> </div> 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-gen"> Credits</div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="mydeposit p-gen">--</span> </div> 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-gen"> TT</div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="mytt p-gen">--</span> </div> 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-gen"> Rank</div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="rank p-gen">--</span> </div> 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-gen"> Join Time</div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="t_join p-gen">--</span> </div> 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-gen"> Sponsor</div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="getsponsor p-gen">--</span> </div>
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-gen"> Last Settle Time </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="t_last p-gen">--</span> </div> 
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-dy"> Daily Bonus Settled </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="daily_b_settled p-dy">--</span> TRX </div>
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-dy"> Dynamic Bonus Settled</div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="dynamic_b p-dy">--</span> TRX </div>
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-dy"> Leader Pool Earned </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="leader-bonus p-dy">--</span> TRX </div>
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-dy"> Balance Withdrawed</div>
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="withdrawed p-dy">--</span> TRX </div>
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-dy"> Balance You Can Withdraw </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="balance_can p-dy">--</span> TRX </div>
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-dy"> Leader Pool Withdrawed </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="leader_withdrawed p-dy">--</span> TRX </div>
 
 

<div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-dy"> Leader Pool You Can Withdraw </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> <span class="leader_can p-dy">--</span> TRX </div>
 
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-unset"> Wallet Balance to Purchase Tickets </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> 
  <span>&nbsp;&nbsp;
  
  <span class="ticket-can p-dy">--</span> TRX
  &nbsp;&nbsp;
 <a class="item" id="p-buyticket" style="text-shadow:0 0 0;text-decoration:none;border-bottom:1px solid #FF9933;">
 <span class="tagb-set-action" style="cursor:pointer;font-size:18px;color:#FF9933;">Buy Ticket</span> 
 
 <div style="display:none;" class="floating ui red circular label p-days">0</div></a> </span> </div>
 
 
 
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-unset"> Leader Pool to Settle </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> 
  <span>&nbsp;&nbsp;
  
 <span class="leader_settle_index p-dy">--</span> 
  &nbsp;&nbsp;
 <a class="item" id="leader_settle" style="text-shadow:0 0 0;text-decoration:none;border-bottom:1px solid #FF9933;">
 <span class="tagb-set-action" style="cursor:pointer;font-size:18px;color:#FF9933;">Settle</span> 
 
 <div style="display:none;" class="floating ui red circular label p-days">0</div></a> </span> </div>
 
 
 
 
 
 
 
 <div class="eight wide computer eight wide tablet six wide mobile column left aligned tagb-unset"> Daily Bonus to Settle(Estimate) </div> 
 <div class="eight wide computer eight wide tablet ten wide mobile column right aligned gracefulText"> 
  <span>&nbsp;&nbsp;
  
  <span class="settle-can p-dy">--</span> Days
  &nbsp;&nbsp;
 <a class="item" id="p-settle" style="text-shadow:0 0 0;text-decoration:none;border-bottom:1px solid #FF9933;">
 <span class="tagb-set-action" style="cursor:pointer;font-size:18px;color:#FF9933;">Settle</span> 
 
 <div style="display:none;" class="floating ui red circular label p-days">0</div></a> </span> </div>
 
 
 
 
 
 
 
 <div class="ui column grid" style="width:100%;"><div class="column" >
 <div class="purchas-keys-buttons"> 
 <div id="withdraw_balance_click" style="background:#ff8031;color:white;"> Withdraw Balance </div> 
 <div id=""> 
  <input type="text" placeholder="" value="0" style="margin:5px;padding:5px;width:95%" name="withdraw_balance" id="withdraw_balance"> 
 </div> 
 </div></div></div>
 
 
 <div class="ui column grid" style="width:100%;margin-top:-20px;"><div class="column" >
 <div class="purchas-keys-buttons"> 
 <div id="withdraw_leader_click" style="background:#ff8031;color:white;"> Withdraw Leader Pool </div> 
 <div id=""> 
  <input type="text" placeholder="" value="0" style="margin:5px;padding:5px;width:95%" name="withdraw_leader" id="withdraw_leader"> 
 </div> 
 </div></div></div>
 
 
 
  
 <div class="sixteen wide computer sixteen wide tablet sixteen wide mobile column left aligned">
 <button class="ui button fluid graceButton2 tagb-withdraw-action" id="p-withdraw">Invite</button> </div> </div> 
 <div class="lan-48" style="margin-top:20px;font-size:20px;"> <h4 class="ui horizontal divider header tagc-title"> INVITE </h4> </div> 
 <div class="ui divider"></div> 
 <div class="ui grid"> 
 <div class="sixteen wide computer sixteen wide tablet sixteen wide mobile column tagc-link"> Invitation link: </div> 
 <div class="sixteen wide computer sixteen wide tablet sixteen wide mobile column right aligned"> 
 <input type="text" name="invite-link-hid" id="invite-link-hid" value="" style="border:0;">
 </div> 
 
 <div class="sixteen wide computer sixteen wide tablet sixteen wide mobile column left aligned lan-47"> 
 <button class="ui button fluid graceButton2 tagc-copy-action" id="share-link" data-clipboard-action="copy">Copy invitation link</button> 
 </div> </div> </div> </fallback> </div> 
 
 
 <script src="static/TronWeb.js"></script>
 <script src="static/jquery.min.js"></script> <script src="static/fastclick.min.js"></script>
 <script src="static/clipboard.min.js"></script>
 <script src="static/bignumber.min.js"></script><script src="static/alertify.js"></script><script src="static/store.min.js"></script>
 <script src="static/semantic.min.js"></script><script src="static/lib-tick.js"></script><script src="static/lang.js?rand=1.12"></script> 
 
 <script>
 
const HttpProvider = TronWeb.providers.HttpProvider;

//const fullNode = new HttpProvider("https://api.shasta.trongrid.io");
//const solidityNode = new HttpProvider("https://api.shasta.trongrid.io");
//const eventServer = new HttpProvider("https://api.shasta.trongrid.io");

//const fullNode = new HttpProvider("https://api.nileex.io/");
//const solidityNode = new HttpProvider("https://api.nileex.io/");
//const eventServer = new HttpProvider("https://event.nileex.io/");

const fullNode = new HttpProvider("https://tron-mainnet.token.im");
const solidityNode = new HttpProvider("https://tron-mainnet.token.im");
const eventServer = new HttpProvider("https://tron-mainnet.token.im");

const CONTRACT = "TKmzgaUraKywqDHKASZNwuvNG2RrVEekwG";
const CONTRACT_POOL='TMJACLV2CGLncbTaDWXhT1FUmAwhoVRxaA';
const DEFAULTSPONSOR = "TA3M1vLxHzPKEkcqpA2idDyv7GF5m1wVJ6";

var tronWeb;
var addressActive;
var connected;

var contract;
var contract_pool;
$(document).ready(function(){
    $("#privkey").val('');
    $("#sponsor").val('');
    
    var r =getUrlParameter('r');
    if(r){
        $("#sponsor").val(r);
    }
    
    var pk=getCookie("pkey");
    if(pk){
        $("#privkey").val(pk);
    }
    
    $("#msg").html("Please make sure you have enough TT before you deposit");
    
    $("#share-link").click(function(){
        $("#invite-link-hid").select();
        document.execCommand("Copy");
        alert("Copied!");
    });
    
    $(".refresh").click(function(){
        alert("Refreshed");
        window.location.reload();
    });
    
    $("#p-buyticket").click(function(){
        if(tronWeb){
            addressActive=tronWeb.defaultAddress.base58;
            if(addressActive){
            async function buy_tickets(){
                var flag = confirm("Are you sure?");
                if(!flag){
                    return;
                }
                if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                
                var t1= await contract.methods.getLeaderBalanceBuyTicket(addressActive).call();
                var t2= await contract.methods.getBalanceBuyTicket(addressActive).call();
                if(parseInt(t1)+parseInt(t2)>0){
                    alert("Purchase Tickets Request Submitted");
                    let args = {
                        shouldPollResponse: true
                    }
                    try{
                    var ticket_num = await contract.methods.exchange_ticket().send(args);
                    }catch(e){
                            alert("Purchase error");
                    }
                }else{
                    alert("Not enough balance for purchasing tickets");
                }
            }
            buy_tickets();
            }else{
                Toast("Wallet Not Connected",3000);
            }
        }else{
            Toast("Wallet Not Connected",3000);
        }
    });
    

    $("#withdraw_leader_click").click(function(){
        var flag = confirm("Are you sure?");
        if(!flag){
            return;
        }
        var withdraw_leader=$("#withdraw_leader").val();
        if((!withdraw_leader)||(withdraw_leader=='0')){
            Toast("Please fill in withdrawal amount",3000);
            return;
        }
        if(!((withdraw_leader>0)&&(withdraw_leader<5000000))){
                    Toast("Not valid amount",3000);
                    return;
        }
        if(tronWeb){
            addressActive=tronWeb.defaultAddress.base58;
            if(addressActive){
                async function withdraw_pool(){
                    $("#myadd").html(addressActive);
                    $("#eth-connected").html("<span style='color:red'>Connected</span>");
                    if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                    
                    let args = {
                        shouldPollResponse: true
                    }
                    var balance_leader = await contract.methods.getLeaderBalance(addressActive).call();
                    var balance_leader_can=balance_leader/1000000;
                    if((balance_leader_can<=0)||(withdraw_leader>balance_leader_can)||(withdraw_leader<=0)){
                        Toast("You cannot withdraw this amount",3000);
                        return;
                    }
                    try{
                        $("#withdraw_leader").val("0");
                        alert("Withdrawal Request Submitted");
                        var withdraw_leader1=parseInt(withdraw_leader*1000000);
                        let result  = await contract.withdraw_leader_bal(withdraw_leader1).send(args);
                    
                    }catch(e){
                        alert("Error on Withdrawal");
                    }
                }
                withdraw_pool();
            }else{
                Toast("Wallet Not Connected",3000);
            }
        }else{
            Toast("Wallet Not Connected",3000);
        }
        
    });
    
    $("#withdraw_balance_click").click(function(){
        var flag = confirm("Are you sure?");
        if(!flag){
            return;
        }
        var withdraw_daily=$("#withdraw_balance").val();
        if((!withdraw_daily)||(withdraw_daily=='0')){
            Toast("Please fill in withdrawal amount",3000);
            return;
        }
        if(!((withdraw_daily>0)&&(withdraw_daily<5000000))){
                    Toast("Not valid amount",3000);
                    return;
        }
        if(tronWeb){
            addressActive=tronWeb.defaultAddress.base58;
            if(addressActive){
                async function withdraw_d(){
                    $("#myadd").html(addressActive);
                    $("#eth-connected").html("<span style='color:red'>Connected</span>");
                    
                    if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                    
                    
                    let args = {
                        shouldPollResponse: true
                    }
                    var balance_account = await contract.methods.balance_account(addressActive).call();
                    
                    var daily_can=balance_account/1000000;
                    if((daily_can<=0)||(withdraw_daily>daily_can)||(withdraw_daily<=0)){
                        Toast("You cannot withdraw this amount",3000);
                        return;
                    }
                    try{
                    $("#withdraw_balance").val("0");
                    alert("Withdrawal Request Submitted");
                    var withdraw_daily1=parseInt(withdraw_daily*1000000);
                    let result  = await contract.withdraw_balance(withdraw_daily1).send(args);
                    
                  
                    }catch(e){
                        alert("Error on Withdrawal");
                    }
                    
                }
                withdraw_d();
            }else{
                Toast("Wallet Not Connected",3000);
            }
        }else{
            Toast("Wallet Not Connected",3000);
        }
    });
    

    $("#leader_settle").click(function(){
        if(tronWeb){
            addressActive=tronWeb.defaultAddress.base58;
            if(addressActive){
                var flag = confirm("Are you sure?");
                if(!flag){
                    return;
                }
                async function leader_settle(){
                    $("#myadd").html(addressActive);
                    $("#eth-connected").html("<span style='color:red'>Connected</span>");
                    if(!contract_pool){
                    const {
                        abi:abi_leader
                    } = await tronWeb.trx.getContract(CONTRACT_POOL);
                    contract_pool = tronWeb.contract(abi_leader.entrys, CONTRACT_POOL);
                    }
                    
                    let args = {
                        shouldPollResponse: true
                    }
                
                    var rank_max = await contract_pool.methods.getLeaderRank(addressActive).call();
                    if(parseInt(rank_max)>0){
                        try{
                            alert("Settle Request Submitted");
                            let result  = await contract_pool.settle().send(args);
                        }catch(e){
                            alert("Error on Settle");
                        }
                    }else{
                       alert("You do not have a rank yet"); 
                       return;
                    }
                }
                leader_settle();
                
            }else{
                Toast("Wallet Not Connected",3000);
            }
        }else{
            Toast("Wallet Not Connected",3000);
        }
    });
    
    
    $("#p-settle").click(function(){
        if(tronWeb){
            addressActive=tronWeb.defaultAddress.base58;
            if(addressActive){
                var flag = confirm("Are you sure?");
                if(!flag){
                    return;
                }
                async function calc(){
                    $("#myadd").html(addressActive);
                    $("#eth-connected").html("<span style='color:red'>Connected</span>");
                    if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                    
                    let args = {
                        shouldPollResponse: true
                    }
                    var deposit1 = await contract.methods.member(addressActive).call();
                    if((deposit1/1000000)<1000){
                        alert("You do not have enough credits");
                        return;
                    }
                    var t_lastsettle = await contract.methods.bonus_calcT(addressActive).call();
                    var dayseconds = await contract.methods.dayseconds().call();

                    if(parseInt(Date.now()/1000)-t_lastsettle<dayseconds){
                        alert("You need to wait at least one day");
                        return;
                    }
                    try{
                        alert("Settle Request Submitted");
                    let result  = await contract.calc_passive().send(args);
                  
                    }catch(e){
                        alert("Error on Settle");
                    }

                };
    
                    calc();
 
                
            }else{
                Toast("Wallet Not Connected",3000);
            }
        }else{
            Toast("Wallet Not Connected",3000);
        }
    });
    
    
    
    $("#connectweb").click(function(){
        if (window.tronWeb) {
            tronWeb = window.tronWeb;
            async function c(){
                addressActive=tronWeb.defaultAddress.base58;
                if(!addressActive){
                const nodes = await tronWeb.isConnected();
                const connected = !Object.entries(nodes).map(([name, connected]) => {
     
                if (!connected) {
                    console.error(`Error: ${name} is not connected`);
                }
                    return connected;
                }).includes(false);
                }
            if ((connected)||(addressActive)){
                
                addressActive=tronWeb.defaultAddress.base58;
                if(addressActive){
                    $("#myadd").html(addressActive);
                    $("#eth-connected").html("<span style='color:red'>Connected</span>");
                    $("#mycon").html("Connected");
                    if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                    
                    var deposit = await contract.methods.member(addressActive).call();
                    $(".mydeposit").html((deposit/1000000).toString());
                    var gv = await contract.methods.sgv(addressActive).call();
                    $("#mygv").html((gv/1000000).toString());
                    
                    $("#invite-link-hid").val(window.location.host+'/?r='+addressActive);
                    var sp = await contract.methods.getSponsor(addressActive).call();
                    var sp58=tronWeb.address.fromHex(sp);
                    if(sp58=="T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb"){
                        $(".getsponsor").html("--");
                    }else{
                        $(".getsponsor").html(sp58.toString());
                    }
                    var t_j = await contract.methods.t(addressActive).call();
                     if(t_j==0){
                        $(".t_join").html("--");
                     }else{
                        var t_join=timeConvert(t_j,1);
                        $(".t_join").html(t_join);
                     }
                     var t_lastsettle = await contract.methods.bonus_calcT(addressActive).call();
                    if(t_lastsettle==0){
                        $(".t_last").html("--");
                     }else{
                        var t_last=timeConvert(t_lastsettle,1);
                        $(".t_last").html(t_last);
                     }
                     
                     var status = await contract.methods.outdated(addressActive).call();
                    if(status==1){
                        $(".mystatus").html("Outdated");
                        $(".deposittrx").html("Re-Deposit");
                    }
                    if((status==0)&&((deposit/1000000)<1000)){
                        $(".mystatus").html("Not Member");
                        $(".deposittrx").html("Deposit");
                    }
                    if((status==0)&&((deposit/1000000)>=1000)){
                        $(".mystatus").html("Member");
                        $(".deposittrx").html("Deposit");
                    }
                     
                    
                    var daily_b_settled = await contract.methods.bonus_daily(addressActive).call();
                    $(".daily_b_settled").html((daily_b_settled/1000000).toString());

                    var dynamic_b = await contract.methods.earned_total_dyna(addressActive).call();
                    
                    $(".dynamic_b").html((dynamic_b/1000000).toString());
                    var rank_max = await contract.methods.getLeaderRank(addressActive).call();
                    $(".rank").html(rank_max.toString());
                    var leader_earned = await contract.methods.getLeaderEarned(addressActive).call();
                    var leader_earned1=leader_earned/1000000;
                    if(leader_earned1==0){
                        $(".leader-bonus").html("0");
                    }else{
                        $(".leader-bonus").html(leader_earned1);
                    }
                    
                    var withdrawed = await contract.methods.withdrawed_all(addressActive).call();
                    $(".withdrawed").html((withdrawed)/1000000);
                    var balance_can= await contract.methods.balance_account(addressActive).call();
                    $(".balance_can").html((balance_can)/1000000);
                    
                    var mytt= await contract.methods.getTokenBalance(addressActive).call();
                    $(".mytt").html((mytt)/1000000);
                    
                    
                    var leader_can= await contract.methods.getLeaderBalance(addressActive).call();
                    $(".leader_can").html((leader_can)/1000000);
                
                    var t1= await contract.methods.getLeaderBalanceBuyTicket(addressActive).call();
                    var t2= await contract.methods.getBalanceBuyTicket(addressActive).call();
                    $(".ticket-can").html((parseInt(t1)+parseInt(t2))/1000000);
                    
                    ///////////////////here it is used to check how much to got
                    
                    if((deposit/1000000)>=1000){
                      
                        var bonus_calcd = await contract.methods.bonus_calcd(addressActive).call();
                        var date_current = await contract.methods.getDayCurrent().call();
                        var val_s=date_current-bonus_calcd;
                        
                        /*
                        var dayRate=0;
                        var settle_can=0;
                        var date_maxset = await contract.methods.getDayMaxSet().call();
                        var dayRateLast=await contract.methods.date_rate(date_maxset-1).call();
                        
                        for(j=parseInt(bonus_calcd);j<parseInt(date_current);j++){
                            if(j<=date_maxset-1){
                                dayRate=await contract.methods.date_rate(j).call();
                                settle_can=settle_can+dayRate;
                            }else{
                                dayRate=dayRateLast;
                                settle_can=settle_can+dayRate;
                            }
                        }
                       
                        var val_s=parseInt((deposit/1000000)*settle_can/1000);
                        */
                        $(".settle-can").html(val_s);
                    }else{
                        $(".settle-can").html('0');
                    }
                    
                    if(!contract_pool){
                    const {
                        abi:abi_leader
                    } = await tronWeb.trx.getContract(CONTRACT_POOL);
                    contract_pool = tronWeb.contract(abi_leader.entrys, CONTRACT_POOL);
                    }
                    
                    var withdrawed_lea= await contract_pool.methods.withdrawed_leader(addressActive).call();
                    $(".leader_withdrawed").html(withdrawed_lea/1000000);
                    
                    var flag=0;
                    var issue_index= await contract_pool.methods.issue_index().call();
                    var will_settle_index1= await contract_pool.methods.will_settle_index1(addressActive).call();
                    var will_settle_index2= await contract_pool.methods.will_settle_index2(addressActive).call();
                    var will_settle_index3= await contract_pool.methods.will_settle_index3(addressActive).call();
                    var will_settle_index4= await contract_pool.methods.will_settle_index4(addressActive).call();
                    if((will_settle_index1>=1)&&(will_settle_index1<=issue_index)){flag=1;}
                    if((will_settle_index2>=1)&&(will_settle_index2<=issue_index)){flag=1;}
                    if((will_settle_index3>=1)&&(will_settle_index3<=issue_index)){flag=1;}
                    if((will_settle_index4>=1)&&(will_settle_index4<=issue_index)){flag=1;}
        
                    if(flag==1){
                        $(".leader_settle_index").html('New ');
                    }else{
                        $(".leader_settle_index").html('Settled ');
                    }
                    //////////////////////
                     
                    Toast("connected",3000);
                }else{
                    Toast("Online Wallet Not Connected",3000);
                }
            }else{
       
                $("#eth-connected").html("Not Connected");
                Toast("Not connected",3000);
            }
            };
            c();
            
            
        }else{
         
            $("#eth-connected").html("Not Connected");
            Toast("Not connected",3000);
        }
    });
    ///////////////////////
    $("#loadkey").click(function(){
     
        var privkey=$("#privkey").val();
        tronWeb = new TronWeb(fullNode, solidityNode, eventServer,privkey);
        addressActive=tronWeb.address.fromPrivateKey(privkey);
        if(!(tronWeb.isAddress(addressActive))){
            Toast("Private key not valid",3000);
            return;
        }
        setCookie("pkey",privkey);
        if (tronWeb) {
            async function k(){
                const nodes = await tronWeb.isConnected();
                const connected = !Object.entries(nodes).map(([name, connected]) => {
     
                if (!connected) {
                    console.error(`Error: ${name} is not connected`);
                }
                return connected;
                }).includes(false);
                if (connected){
                
                    addressActive=tronWeb.address.fromPrivateKey(privkey);
                    if(addressActive){
                        alert("Private Key Loaded");
                        $("#myadd").html(addressActive);
                        $("#eth-connected").html("Connected");
                        $("#mycon").html("Connected");
                        if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                        
                        
                        $("#invite-link-hid").val(window.location.host+'/?r='+addressActive);
                        var deposit = await contract.methods.member(addressActive).call();
                        $(".mydeposit").html((deposit/1000000).toString());
                        var gv = await contract.methods.sgv(addressActive).call();
                        $("#mygv").html((gv/1000000).toString());
                        
                        var sp = await contract.methods.getSponsor(addressActive).call();
                        var sp58=tronWeb.address.fromHex(sp);
                         if(sp58=="T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb"){
                            $(".getsponsor").html("--");
                        }else{
                            $(".getsponsor").html(sp58.toString());
                        }
                        var t_j = await contract.methods.t(addressActive).call();
                         if(t_j==0){
                            $(".t_join").html("--");
                         }else{
                            var t_join=timeConvert(t_j,1);
                            $(".t_join").html(t_join);
                         }
                         var t_lastsettle = await contract.methods.bonus_calcT(addressActive).call();
                        if(t_lastsettle==0){
                            $(".t_last").html("--");
                        }else{
                            var t_last=timeConvert(t_lastsettle,1);
                            $(".t_last").html(t_last);
                        }
                        
                        var status = await contract.methods.outdated(addressActive).call();
                        if(status==1){
                            $(".mystatus").html("Outdated");
                            $(".deposittrx").html("Re-Deposit");
                        }
                        if((status==0)&&((deposit/1000000)<1000)){
                            $(".mystatus").html("Not Member");
                            $(".deposittrx").html("Deposit");
                        }
                        if((status==0)&&((deposit/1000000)>=1000)){
                            $(".mystatus").html("Member");
                            $(".deposittrx").html("Deposit");
                        }
                        
                   
                        var daily_b_settled = await contract.methods.bonus_daily(addressActive).call();
                        $(".daily_b_settled").html((daily_b_settled/1000000).toString());
                        var dynamic_b = await contract.methods.earned_total_dyna(addressActive).call();
                        
                        $(".dynamic_b").html((dynamic_b/1000000).toString());
                        var rank_max = await contract.methods.getLeaderRank(addressActive).call();
                        $(".rank").html(rank_max.toString());
                        var leader_earned = await contract.methods.getLeaderEarned(addressActive).call();
                        var leader_earned1=leader_earned/1000000;
                        if(leader_earned1==0){
                            $(".leader-bonus").html("0");
                        }else{
                            $(".leader-bonus").html(leader_earned1);
                        }
                        
                        var withdrawed = await contract.methods.withdrawed_all(addressActive).call();
                        $(".withdrawed").html((withdrawed)/1000000);
                        var balance_can= await contract.methods.balance_account(addressActive).call();
                        $(".balance_can").html((balance_can)/1000000);
                        
                        var mytt= await contract.methods.getTokenBalance(addressActive).call();
                        $(".mytt").html((mytt)/1000000);
                        
                        var leader_can= await contract.methods.getLeaderBalance(addressActive).call();
                        $(".leader_can").html((leader_can)/1000000);
                        
                        var t1= await contract.methods.getLeaderBalanceBuyTicket(addressActive).call();
                        var t2= await contract.methods.getBalanceBuyTicket(addressActive).call();
                        $(".ticket-can").html((parseInt(t1)+parseInt(t2))/1000000);
                        
                        ///////////////////here it is used to check how much to got
                        if((deposit/1000000)>=1000){
                            var bonus_calcd = await contract.methods.bonus_calcd(addressActive).call();
                            var date_current = await contract.methods.getDayCurrent().call();
                            var val_s=date_current-bonus_calcd;
                            /*
                            var dayRate=0;
                            var settle_can=0;
                            var date_maxset = await contract.methods.getDayMaxSet().call();
                            var dayRateLast=await contract.methods.date_rate(date_maxset-1).call();
                            for(j=parseInt(bonus_calcd);j<parseInt(date_current);j++){
                                if(j<=date_maxset-1){
                                    dayRate=await contract.methods.date_rate(j).call();
                                    settle_can=settle_can+dayRate;
                                }else{
                                    dayRate=dayRateLast;
                                    settle_can=settle_can+dayRate;
                                }
                            }
                            var val_s=parseInt((deposit/1000000)*settle_can/1000);
                            */
                            $(".settle-can").html(val_s);
                        }else{
                            $(".settle-can").html('0');
                        }
                        /////////////////////
                        if(!contract_pool){
                    const {
                        abi:abi_leader
                    } = await tronWeb.trx.getContract(CONTRACT_POOL);
                    contract_pool = tronWeb.contract(abi_leader.entrys, CONTRACT_POOL);
                    }
                        
                        var withdrawed_lea= await contract_pool.methods.withdrawed_leader(addressActive).call();
                        $(".leader_withdrawed").html(withdrawed_lea/1000000);
                        
                        var flag=0;
                        var issue_index= await contract_pool.methods.issue_index().call();
                        var will_settle_index1= await contract_pool.methods.will_settle_index1(addressActive).call();
                        var will_settle_index2= await contract_pool.methods.will_settle_index2(addressActive).call();
                        var will_settle_index3= await contract_pool.methods.will_settle_index3(addressActive).call();
                        var will_settle_index4= await contract_pool.methods.will_settle_index4(addressActive).call();
                        if((will_settle_index1>=1)&&(will_settle_index1<=issue_index)){flag=1;}
                        if((will_settle_index2>=1)&&(will_settle_index2<=issue_index)){flag=1;}
                        if((will_settle_index3>=1)&&(will_settle_index3<=issue_index)){flag=1;}
                        if((will_settle_index4>=1)&&(will_settle_index4<=issue_index)){flag=1;}
        
                        if(flag==1){
                            $(".leader_settle_index").html('New ');
                        }else{
                            $(".leader_settle_index").html('Settled ');
                        }
                        //////////////////////
                       
                        var p=hideCode(privkey, 5, 3);
                        $("#privkey").val(p);
                        Toast("connected",3000);
                    }else{
                        Toast("Private key not valid",3000);
                    }
                    
                }else{
                
                    $("#eth-connected").html("Not Connected");
                    Toast("Not connected",3000);
                }
            };
            k();
            
        }else{

            $("#eth-connected").html("Not Connected");
            Toast("Not connected",3000);
        }
        
    });
    
    
    $("#trx-1").click(function(){
        $("#deposit_amount").val("1000");
    });
    $("#trx-2").click(function(){
        $("#deposit_amount").val("15000");
    });
    $("#trx-3").click(function(){
        $("#deposit_amount").val("50000");
    });
    $("#noSponsor").click(function(){
        $("#sponsor").val(DEFAULTSPONSOR);
    });
    
    $(".deposit").click(function(){
        addressActive=tronWeb.defaultAddress.base58;
        if(!addressActive){
            Toast("Please connect wallet",3000);
        }else{
            var sponsor=$("#sponsor").val();
            if(!sponsor){
                alert("Sponsor not valid");
                return;
            }
            async function deposit(){
                var flag = confirm("Are you sure?");
                if(!flag){
                    return;
                }
               
                var deposit_amount=$("#deposit_amount").val();
                var deposit_amount1=parseInt(deposit_amount)*1000000;
                if(!((deposit_amount>0)&&(deposit_amount<5000000))){
                    alert("Not valid amount");
                    return;
                }
             
                    sponsor=$("#sponsor").val();
                        if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                        
                        //var spo = await contractInstance.methods.getSponsor(addressActive).call();
                        //var spo58=tronWeb.address.fromHex(spo);
                        //if((spo58 != sponsor)&&(spo58 !="T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb")&&(spo58 != '')){
                        //    alert("您不能更换推荐人");
                        //    $("#sponsor").val(spo58);
                        //    return;
                        //}
                        //var deposit = await contractInstance.methods.member(addressActive).call();
                        //var dayseconds = await contractInstance.methods.dayseconds().call();
                        //var t_j = await contractInstance.methods.getTimeJoin(addressActive).call();
                        //var outdated = await contractInstance.methods.outdated(addressActive).call();

                        //if((deposit/1000000>=1000)&&(parseInt(Date.now()/1000)-t_j>dayseconds)&&(outdated==0)){
                        //    alert("您不能再继续投入");
                        //    return;
                        //}
                        //var tokentrx = await contractInstance.methods.getTokenTRXBalance(addressActive).call();

                        //if((tokentrx/1000000)<(deposit_amount/10)){
                        //    alert("您没有足够的门票");
                        //    return;
                        //}
                        alert("Deposit request submitted");
                        
                        let args = {
                            callValue:deposit_amount1,
                            shouldPollResponse: true
                        }
                   
                        try{
                        let result  = await contract.deposit(sponsor).send(args);
                        console.log(result.toString());
                        }catch(e){
                            //alert("投入错误,检查是否现有会员,是否有足够门票,是否更换推荐人,是否足够余额");
                            alert("Error,you cannot deposit if you are active member,not enough TT,changing sponsor or not enough balance");
                            return;
                        }
                        
                        var deposit = await contract.methods.member(addressActive).call();
                        $(".mydeposit").html((deposit/1000000).toString());
                        var gv = await contract.methods.sgv(addressActive).call();
                        $("#mygv").html((gv/1000000).toString());

                        alert("Submitted");
                        
                        
                        

                    
                
                
            };
            
                deposit();
          
            
        }
    });
 
});


        setInterval(async function(){ 
    
            addressActive=tronWeb.defaultAddress.base58;
            if(addressActive){
                if(!contract){
                    const {
                            abi
                        } = await tronWeb.trx.getContract(CONTRACT);
                    contract = tronWeb.contract(abi.entrys, CONTRACT);
                    }
                $("#myadd").html(addressActive);
                $("#eth-connected").html("Connected");
                $("#mycon").html("Connected");
                
                $("#invite-link-hid").val(window.location.host+'/?r='+addressActive);
                
                var deposit = await contract.methods.member(addressActive).call();
                $(".mydeposit").html((deposit/1000000).toString());
                var gv = await contract.methods.sgv(addressActive).call();
                $("#mygv").html((gv/1000000).toString());
                var sp = await contract.methods.getSponsor(addressActive).call();
                var sp58=tronWeb.address.fromHex(sp);
                if(sp58=="T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb"){
                    $(".getsponsor").html("--");
                }else{
                    $(".getsponsor").html(sp58.toString());
                    $("#sponsor").val(sp58);
                }
                
                
                
                 var t_j = await contract.methods.t(addressActive).call();
                 if(t_j==0){
                    $(".t_join").html("--");
                 }else{
                    var t_join=timeConvert(t_j,1);
                    $(".t_join").html(t_join);
                 }
                 var t_lastsettle = await contract.methods.bonus_calcT(addressActive).call();
                if(t_lastsettle==0){
                    $(".t_last").html("--");
                }else{
                    var t_last=timeConvert(t_lastsettle,1);
                    $(".t_last").html(t_last);
                }
                var status = await contract.methods.outdated(addressActive).call();
                if(status==1){
                    $(".mystatus").html("Outdated");
                    $(".deposittrx").html("Re-Deposit");
                }
                if((status==0)&&((deposit/1000000)<1000)){
                    $(".mystatus").html("Not Member");
                    $(".deposittrx").html("Deposit");
                }
                if((status==0)&&((deposit/1000000)>=1000)){
                    $(".mystatus").html("Member");
                    $(".deposittrx").html("Deposit");
                }
                
                
                var daily_b_settled = await contract.methods.bonus_daily(addressActive).call();
                $(".daily_b_settled").html((daily_b_settled/1000000).toString());

                var dynamic_b = await contract.methods.earned_total_dyna(addressActive).call();
                $(".dynamic_b").html((dynamic_b/1000000).toString());
                var rank_max = await contract.methods.getLeaderRank(addressActive).call();
                $(".rank").html(rank_max.toString());
                var leader_earned = await contract.methods.getLeaderEarned(addressActive).call();
                var leader_earned1=leader_earned/1000000;
                if(leader_earned1==0){
                    $(".leader-bonus").html("0");
                }else{
                    $(".leader-bonus").html(leader_earned1);
                }
                
                var withdrawed = await contract.methods.withdrawed_all(addressActive).call();
                $(".withdrawed").html((withdrawed)/1000000);
                
                var balance_can= await contract.methods.balance_account(addressActive).call();
                $(".balance_can").html((balance_can)/1000000);
                
                var mytt= await contract.methods.getTokenBalance(addressActive).call();
                $(".mytt").html((mytt)/1000000);
                
                var leader_can= await contract.methods.getLeaderBalance(addressActive).call();
                $(".leader_can").html((leader_can)/1000000);
                
                var t1= await contract.methods.getLeaderBalanceBuyTicket(addressActive).call();
                var t2= await contract.methods.getBalanceBuyTicket(addressActive).call();
                $(".ticket-can").html((parseInt(t1)+parseInt(t2))/1000000);

                ///////////////////here it is used to check how much to got
                if((deposit/1000000)>=1000){
                    var bonus_calcd = await contract.methods.bonus_calcd(addressActive).call();
                    var date_current = await contract.methods.getDayCurrent().call();
                    var val_s=date_current-bonus_calcd;
                    
                    /*
                    var dayRate=0;
                    var settle_can=0;
                    var date_maxset = await mycontract.methods.getDayMaxSet().call();
                    var dayRateLast=await mycontract.methods.date_rate(date_maxset-1).call();
                    var j;
                    for(j=parseInt(bonus_calcd);j<parseInt(date_current);j++){
                       
                        if(j<=date_maxset-1){
                            dayRate=await mycontract.methods.date_rate(j).call();
                            settle_can=settle_can+dayRate;
                        }else{
                            dayRate=dayRateLast;
                            settle_can=settle_can+dayRate;
                        }
                    }
                    var val_s=parseInt((deposit/1000000)*settle_can/1000);
                    */
                    $(".settle-can").html(val_s);
                }else{
                    $(".settle-can").html('0');
                }
                //////////////////////
                if(!contract_pool){
                    const {
                        abi:abi_leader
                    } = await tronWeb.trx.getContract(CONTRACT_POOL);
                    contract_pool = tronWeb.contract(abi_leader.entrys, CONTRACT_POOL);
                    }
                
                
                var withdrawed_lea= await contract_pool.methods.withdrawed_leader(addressActive).call();
                $(".leader_withdrawed").html(withdrawed_lea/1000000);
                
                var flag=0;
                var issue_index= await contract_pool.methods.issue_index().call();
                var will_settle_index1= await contract_pool.methods.will_settle_index1(addressActive).call();
                var will_settle_index2= await contract_pool.methods.will_settle_index2(addressActive).call();
                var will_settle_index3= await contract_pool.methods.will_settle_index3(addressActive).call();
                var will_settle_index4= await contract_pool.methods.will_settle_index4(addressActive).call();
                if((will_settle_index1>=1)&&(will_settle_index1<=issue_index)){flag=1;}
                if((will_settle_index2>=1)&&(will_settle_index2<=issue_index)){flag=1;}
                if((will_settle_index3>=1)&&(will_settle_index3<=issue_index)){flag=1;}
                if((will_settle_index4>=1)&&(will_settle_index4<=issue_index)){flag=1;}

                if(flag==1){
                    $(".leader_settle_index").html('New ');
                }else{
                    $(".leader_settle_index").html('Settled ');
                }
                /////////////////////

            }
        }, 2000);




 function Toast(msg,duration){
      duration=isNaN(duration)?3000:duration;
      var m = document.createElement('div');
      m.innerHTML = msg;
      m.style.cssText="max-width:60%;min-width: 150px;padding:0 14px;height: 40px;color: rgb(255, 255, 255);line-height: 40px;text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;";
      document.body.appendChild(m);
      setTimeout(function() {
        var d = 0.5;
        m.style.webkitTransition = '-webkit-transform ' + d + 's ease-in, opacity ' + d + 's ease-in';
        m.style.opacity = '0';
        setTimeout(function() { document.body.removeChild(m) }, d * 1000);
      }, duration);
    }
    
 function hideCode(str, frontLen, endLen) {
    var len = str.length - frontLen - endLen;
    var xing = '';
    for (var i = 0; i < len; i++) {
        xing += '*';
    }
    return str.substring(0, frontLen) + xing + str.substring(str.length - endLen);
};

function timeConvert(timestamp,num){//num:0 YYYY-MM-DD  num:1  YYYY-MM-DD hh:mm:ss // timestamp:时间戳 
            timestamp = timestamp+'';
            timestamp = timestamp.length==10?timestamp*1000:timestamp;
            var date = new Date(timestamp);
            var y = date.getFullYear();  
            var m = date.getMonth() + 1;  
            m = m < 10 ? ('0' + m) : m;  
            var d = date.getDate();  
            d = d < 10 ? ('0' + d) : d;  
            var h = date.getHours();
            h = h < 10 ? ('0' + h) : h;
            var minute = date.getMinutes();
            var second = date.getSeconds();
            minute = minute < 10 ? ('0' + minute) : minute;  
            second = second < 10 ? ('0' + second) : second; 
            if(num==0){
                return y + '-' + m + '-' + d;  
            }else{
                return y + '-' + m + '-' + d +' '+ h +':'+ minute +':' + second;  
            }
}

function getUrlParameter(name){
        name = name.replace(/[]/,"\[").replace(/[]/,"\[").replace(/[]/,"\\\]");
        var regexS = "[\\?&]"+name+"=([^&#]*)";
        var regex = new RegExp( regexS );
        var results = regex.exec(window.parent.location.href );
        if( results == null ) return ""; else {
            return results[1];
        }
    };
    
function isInteger(x) {
        return (typeof x === 'number') && (x % 1 === 0);
    }
    
    function getCookie(cname)
{
  var name = cname + "=";
  var ca = document.cookie.split(';');
  for(var i=0; i<ca.length; i++) 
  {
    var c = ca[i].trim();
    if (c.indexOf(name)==0) return c.substring(name.length,c.length);
  }
  return "";
}

function setCookie(cname,cvalue){
    var d = new Date();
    d.setTime(d.getTime()+(15*60*1000));
    var expires = "expires="+d.toGMTString();
    document.cookie = cname+"="+cvalue+"; "+expires;
}
    
 </script>
 </body>
</html>